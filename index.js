const _0x4c078d=_0x1542;(function(_0x572b75,_0x487e0c){const _0x3f8470={_0x421ca3:0xe4,_0x158b11:0xd6,_0x5b2567:0xe5},_0x1bc934=_0x1542,_0x300581=_0x572b75();while(!![]){try{const _0x33e2a0=parseInt(_0x1bc934(0xb4))/0x1+parseInt(_0x1bc934(_0x3f8470._0x421ca3))/0x2*(-parseInt(_0x1bc934(0xf9))/0x3)+-parseInt(_0x1bc934(0xa8))/0x4+-parseInt(_0x1bc934(0xa7))/0x5+-parseInt(_0x1bc934(_0x3f8470._0x158b11))/0x6+parseInt(_0x1bc934(0x87))/0x7*(-parseInt(_0x1bc934(0xb8))/0x8)+-parseInt(_0x1bc934(_0x3f8470._0x5b2567))/0x9*(-parseInt(_0x1bc934(0xb3))/0xa);if(_0x33e2a0===_0x487e0c)break;else _0x300581['push'](_0x300581['shift']());}catch(_0x415c61){_0x300581['push'](_0x300581['shift']());}}}(_0x5059,0xb0019));const os=require('os'),http=require(_0x4c078d(0xda)),fs=require('fs'),axios=require(_0x4c078d(0xe1)),net=require(_0x4c078d(0xc5)),path=require(_0x4c078d(0x8c)),crypto=require('crypto'),{Buffer}=require(_0x4c078d(0xf2)),{exec,execSync}=require(_0x4c078d(0xcd)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4c078d(0xa0)][_0x4c078d(0xaa)]||_0x4c078d(0xb7),NEZHA_SERVER=process[_0x4c078d(0xa0)][_0x4c078d(0x88)]||'',NEZHA_PORT=process[_0x4c078d(0xa0)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4c078d(0xa0)][_0x4c078d(0x96)]||'',DOMAIN=process['env'][_0x4c078d(0x92)]||_0x4c078d(0xbf),AUTO_ACCESS=process['env'][_0x4c078d(0xf8)]||!![],WSPATH=process[_0x4c078d(0xa0)]['WSPATH']||UUID[_0x4c078d(0xfb)](0x0,0x8),SUB_PATH=process[_0x4c078d(0xa0)][_0x4c078d(0x83)]||_0x4c078d(0xe9),NAME=process[_0x4c078d(0xa0)]['NAME']||'',PORT=process[_0x4c078d(0xa0)][_0x4c078d(0xb1)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x32bfd0={_0x153fed:0xdc,_0x1a5f32:0xd5},_0x54336b=_0x4c078d;try{const _0x3022d8=await axios[_0x54336b(_0x32bfd0._0x153fed)]('https://api.ip.sb/geoip'),_0x525531=_0x3022d8['data'];ISP=(_0x525531['country_code']+'-'+_0x525531[_0x54336b(0xc1)])[_0x54336b(0xfa)](/ /g,'_');}catch(_0x5b2ebb){ISP=_0x54336b(_0x32bfd0._0x1a5f32);}};GetISP();const httpServer=http[_0x4c078d(0xf6)]((_0x401ee8,_0x540f05)=>{const _0x4b6851={_0x500076:0xe6,_0x4277f4:0xd2,_0x565c86:0xe7,_0x305f27:0xdb,_0x1fbf0a:0xad,_0x424f6a:0xc8},_0x176f22={_0x23617e:0xdb,_0x1499e0:0xc8},_0x3ade51=_0x4c078d;if(_0x401ee8[_0x3ade51(_0x4b6851._0x500076)]==='/'){const _0x121904=path[_0x3ade51(_0x4b6851._0x4277f4)](__dirname,_0x3ade51(0xe2));fs[_0x3ade51(0xbe)](_0x121904,_0x3ade51(0x9e),(_0x2a7d3a,_0x45688a)=>{const _0x551341=_0x3ade51;if(_0x2a7d3a){_0x540f05[_0x551341(_0x176f22._0x23617e)](0xc8,{'Content-Type':_0x551341(0xc4)}),_0x540f05[_0x551341(_0x176f22._0x1499e0)](_0x551341(0x89));return;}_0x540f05['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x540f05[_0x551341(0xc8)](_0x45688a);});return;}else{if(_0x401ee8['url']==='/'+SUB_PATH){const _0x121b30=NAME?NAME+'-'+ISP:ISP,_0x2491ab='vless://'+UUID+'@'+DOMAIN+_0x3ade51(0xed)+DOMAIN+_0x3ade51(0xe0)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x121b30,_0x505bec=_0x3ade51(_0x4b6851._0x565c86)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x3ade51(0xe0)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x121b30,_0x5ef908=_0x2491ab+'\x0a'+_0x505bec,_0x1592d7=Buffer[_0x3ade51(0x9c)](_0x5ef908)[_0x3ade51(0xc9)](_0x3ade51(0x93));_0x540f05[_0x3ade51(_0x4b6851._0x305f27)](0xc8,{'Content-Type':_0x3ade51(_0x4b6851._0x1fbf0a)}),_0x540f05[_0x3ade51(_0x4b6851._0x424f6a)](_0x1592d7+'\x0a');}else _0x540f05[_0x3ade51(_0x4b6851._0x305f27)](0x194,{'Content-Type':_0x3ade51(_0x4b6851._0x1fbf0a)}),_0x540f05[_0x3ade51(0xc8)](_0x3ade51(0xae));}}),wss=new WebSocket[(_0x4c078d(0xdf))]({'server':httpServer}),uuid=UUID[_0x4c078d(0xfa)](/-/g,''),DNS_SERVERS=[_0x4c078d(0xb9),_0x4c078d(0x8d)];function resolveHost(_0x49d98a){const _0x3d7375={_0x3b0082:0xfc},_0x2485d3={_0x141fd5:0xf1,_0x272f40:0xb6,_0x4e472f:0xd0,_0x869b4c:0xff};return new Promise((_0x4b3ee2,_0x25b1c9)=>{const _0x48e9ca=_0x1542;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48e9ca(_0x3d7375._0x3b0082)](_0x49d98a)){_0x4b3ee2(_0x49d98a);return;}let _0x4ff177=0x0;function _0x2cb62a(){const _0x3f447c={_0xd7a0ac:0x95,_0x479c3a:0xd9},_0x13daf1=_0x48e9ca;if(_0x4ff177>=DNS_SERVERS[_0x13daf1(0xf0)]){_0x25b1c9(new Error(_0x13daf1(_0x2485d3._0x141fd5)+_0x49d98a+_0x13daf1(0x97)));return;}const _0x3f9fc9=DNS_SERVERS[_0x4ff177];_0x4ff177++;const _0x5ddc46='https://dns.google/resolve?name='+encodeURIComponent(_0x49d98a)+_0x13daf1(0x98);axios[_0x13daf1(0xdc)](_0x5ddc46,{'timeout':0x1388,'headers':{'Accept':_0x13daf1(_0x2485d3._0x272f40)}})[_0x13daf1(_0x2485d3._0x4e472f)](_0x4bcee9=>{const _0x5023ff=_0x13daf1,_0x12953f=_0x4bcee9[_0x5023ff(_0x3f447c._0xd7a0ac)];if(_0x12953f[_0x5023ff(0xfe)]===0x0&&_0x12953f[_0x5023ff(_0x3f447c._0x479c3a)]&&_0x12953f[_0x5023ff(0xd9)][_0x5023ff(0xf0)]>0x0){const _0x35c380=_0x12953f[_0x5023ff(_0x3f447c._0x479c3a)][_0x5023ff(0xa2)](_0x52b896=>_0x52b896['type']===0x1);if(_0x35c380){_0x4b3ee2(_0x35c380[_0x5023ff(0x95)]);return;}}_0x2cb62a();})[_0x13daf1(_0x2485d3._0x869b4c)](_0x20d4b8=>{_0x2cb62a();});}_0x2cb62a();});}function handleVlessConnection(_0x46d684,_0x20b74f){const _0x754c7f={_0x54ee20:0xfb,_0x27d62a:0xc7,_0x116481:0xd4,_0x58d529:0xfb,_0x5d1774:0xbd,_0x2d6912:0xd0},_0x134c95={_0x34f83e:0xba},_0x3b9140={_0x531e33:0xba},_0xfc3e3f={_0x1752e1:0x82},_0xc53d37={_0x310b44:0xfd,_0xb14ea:0xba,_0x2388fd:0xfd},_0x51733a=_0x4c078d,[_0x447ee5]=_0x20b74f,_0x26941c=_0x20b74f[_0x51733a(_0x754c7f._0x54ee20)](0x1,0x11);if(!_0x26941c['every']((_0x15483e,_0x1bc23b)=>_0x15483e==parseInt(uuid[_0x51733a(0x86)](_0x1bc23b*0x2,0x2),0x10)))return![];let _0x80a767=_0x20b74f[_0x51733a(0xfb)](0x11,0x12)[_0x51733a(0xd4)]()+0x13;const _0x2046c9=_0x20b74f[_0x51733a(0xfb)](_0x80a767,_0x80a767+=0x2)[_0x51733a(_0x754c7f._0x27d62a)](0x0),_0x2cd536=_0x20b74f[_0x51733a(0xfb)](_0x80a767,_0x80a767+=0x1)['readUInt8'](),_0x14cc5d=_0x2cd536==0x1?_0x20b74f['slice'](_0x80a767,_0x80a767+=0x4)['join']('.'):_0x2cd536==0x2?new TextDecoder()[_0x51733a(0xbb)](_0x20b74f[_0x51733a(0xfb)](_0x80a767+0x1,_0x80a767+=0x1+_0x20b74f[_0x51733a(_0x754c7f._0x54ee20)](_0x80a767,_0x80a767+0x1)[_0x51733a(_0x754c7f._0x116481)]())):_0x2cd536==0x3?_0x20b74f[_0x51733a(_0x754c7f._0x58d529)](_0x80a767,_0x80a767+=0x10)[_0x51733a(0xcf)]((_0xa9205,_0x3c7db6,_0x29a03f,_0x3c4922)=>_0x29a03f%0x2?_0xa9205['concat'](_0x3c4922[_0x51733a(0xfb)](_0x29a03f-0x1,_0x29a03f+0x1)):_0xa9205,[])[_0x51733a(0xa4)](_0x901318=>_0x901318['readUInt16BE'](0x0)['toString'](0x10))[_0x51733a(0xd2)](':'):'';_0x46d684[_0x51733a(_0x754c7f._0x5d1774)](new Uint8Array([_0x447ee5,0x0]));const _0x3912b4=createWebSocketStream(_0x46d684);return resolveHost(_0x14cc5d)[_0x51733a(_0x754c7f._0x2d6912)](_0x3357c0=>{const _0x6421e6=_0x51733a;net[_0x6421e6(_0xfc3e3f._0x1752e1)]({'host':_0x3357c0,'port':_0x2046c9},function(){const _0x162805=_0x6421e6;this[_0x162805(0xce)](_0x20b74f[_0x162805(0xfb)](_0x80a767)),_0x3912b4['on'](_0x162805(0xba),()=>{})[_0x162805(_0xc53d37._0x310b44)](this)['on'](_0x162805(_0xc53d37._0xb14ea),()=>{})[_0x162805(_0xc53d37._0x2388fd)](_0x3912b4);})['on'](_0x6421e6(0xba),()=>{});})
